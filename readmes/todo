############################################################

V1 Specification, user stories, etc:
√ Log in
√ Log out
√ Schedule push to all
√ View messages and status
√ View details of a message and remove/cancel a message
X View users / registered devices/tokens
X View administrators
X Client framework for server communication


Future specifications:
X Enable client framework to send additional user information, such as name, gender, email, phone number, address, etc
X Group users into different groups
X View user groups / filter users on groups/attributes
X Send push to specific user groups (A notification_template has receivers? (i.e. list of DeviceId))
X View receivers of a notification_template (add a section in the /view/message template)
X Geolocation
X Send push to users at certain locations


############################################################

Backend:

Mobile Client API:
√ /gcm/registerToken:
√ /gcm/unRegisterToken:


Web Client API:
√ /auth/login
√ /auth/logout

X Misc) 
X refactor common components into reusable div classes
X refactor common components into reusable html template/element
√ template_base, create block_meta_scripts in HEAD where all scripts go
X all views, see if I can refactor reouting to {% url action %} format, 
- <a href="{% url action="edit" record_id=record.id %}

- <form name="upload" action="{% url action="upload" model_name=type %}" method="post" enctype="multipart/form-data">
    <input type="file" name="file" /> &nbsp; &nbsp;
    <input type="submit" value="Upload" />
  </form>

X Update lucid chart
X Update apiary

X Live update of sent notifications in 'push/view_messages' when a message is sent
X Move notification_scheduler into src, and invoke it from init?
X Write tests!!!



############################################################

Frontend:

Web Client:

/push/new_message
X Disable 'create' button if no input is entered

X Improve code reusablity etc

############################################################

MISC:

Todo:
X cb_admin 

Refactor:

Tests
X Fix tests that failed after login
X Eunit Test admin, auth_lib, session_lib, device_service, ,
X Functional Test push_controller, auth_controller, lost_controller

X How localize web client?

############################################################

- Mobile client framework:
  - clientId,
  - deviceString
  - iOSVersion
  - frameworkVersion?
  - gcmToken
   
- Server user model:
  - Id
  - clientId
  - deviceString
  - frameworkVersion
  - gcmToken


############################################################

Notification scheduling:
- A device has many notifications (that have been received)
- A notification_template has many notifications (that have been sent), and a creater (AdminId)
- A notification has one device (the receiver) and one template (the contents, etc)


1) Admin creates a new notification template through the web UI, containing title, body, scheduledFor
2) A bg-timer checks for notification_templates that have not been sent and whos scheuledFor has passed.
2.2) For each found notification, update 'sentAt' and send them.
2.3) Upon receiving response, persist a 'notification' object, tied to the 'notification_template', and to the receiving 'device'. 
The 'notification' object also contains status, (TODO: add send timestamp?).

When parsing the response: 
- mark invalid tokens as removed
- update old tokens if we receive new


FUTURE:
- A notification_template has receivers? (i.e. list of DeviceId)
